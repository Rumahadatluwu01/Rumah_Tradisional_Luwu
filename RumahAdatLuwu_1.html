<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tur Virtual Rumah Adat Luwu 0–25 (no loops)</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css"/>
    <link rel="stylesheet" href="css/luwu.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>
</head>
<body>
<div class="top-buttons">
  <a href="index.html" class="back-home">Kembali ke Beranda</a>
    <button id="toggleDragBtn" class="minimap-btn">Nonaktifkan Drag</button>
</div>

<h3>Tur Virtual Rumah Adat Luwu (Scenes 0 → 25)</h3>
<div id="panorama"></div>
<div class="scenes">
  <button onclick="viewer.loadScene('scene0')">0</button>
  <button onclick="viewer.loadScene('scene1')">1</button>
  <button onclick="viewer.loadScene('scene2')">2</button>
  <button onclick="viewer.loadScene('scene3')">3</button>
  <button onclick="viewer.loadScene('scene4')">4</button>
  <button onclick="viewer.loadScene('scene5')">5</button>
  <button onclick="viewer.loadScene('scene6')">6</button>
  <button onclick="viewer.loadScene('scene7')">7</button>
  <button onclick="viewer.loadScene('scene8')">8</button>
  <button onclick="viewer.loadScene('scene9')">9</button>
  <button onclick="viewer.loadScene('scene10')">10</button>
  <button onclick="viewer.loadScene('scene11')">11</button>
  <button onclick="viewer.loadScene('scene12')">12</button>
  <button onclick="viewer.loadScene('scene13')">13</button>
  <button onclick="viewer.loadScene('scene14')">14</button>
  <button onclick="viewer.loadScene('scene15')">15</button>
  <button onclick="viewer.loadScene('scene16')">16</button>
  <button onclick="viewer.loadScene('scene17')">17</button>
  <button onclick="viewer.loadScene('scene18')">18</button>
  <button onclick="viewer.loadScene('scene19')">19</button>
  <button onclick="viewer.loadScene('scene20')">20</button>
  <button onclick="viewer.loadScene('scene21')">21</button>
  <button onclick="viewer.loadScene('scene22')">22</button>
  <button onclick="viewer.loadScene('scene23')">23</button>
  <button onclick="viewer.loadScene('scene24')">24</button>
  <button onclick="viewer.loadScene('scene25')">25</button>
</div>

<script>
 var viewer = pannellum.viewer('panorama', {
    "default": {
      "firstScene": "scene0",
      "autoLoad": true,
      "showControls": true
    },  
    "scenes": {
        "scene0": {
            "title": "Spot 0",
            "type": "equirectangular",
            "panorama": "assets/360_images/image0.jpg",  
            "hotSpots": [
                {
                    "yaw": 0,
                    "pitch": 0,
                    "type": "scene",
                    "text": "Ke Spot 1", 
                    "sceneId": "scene1"  
                }
            ]
        },
        "scene1": {
            "title": "Spot 1",
            "type": "equirectangular",
            "panorama": "assets/360_images/image1.jpg",  
            "hotSpots": [
                {
                    "yaw": 0,
                    "pitch": 0,
                    "type": "scene",
                    "text": "Ke Spot 2", 
                    "sceneId": "scene2"  
                }
            ]
        },
        "scene2": {
            "title": "Spot 2",
            "type": "equirectangular",
            "panorama": "assets/360_images/image2.jpg",
            "hotSpots": [
                {
                    "yaw": -87.73,
                    "pitch": -8.47,
                    "type": "scene",
                    "text": "Ke Spot 3", 
                    "sceneId": "scene3",   
                },
                {
                    "yaw": 34.76,
                    "pitch": -4.60,
                    "type": "scene",
                    "text": "Ke Spot 5", 
                    "sceneId": "scene5",   
                },
                {
                    "yaw": 1.54,
                    "pitch": -4.52,
                    "type": "scene",
                    "text": "Ke Spot 7", 
                    "sceneId": "scene7",   
                }
            ]
        },
        "scene3": {
            "title": "Spot 3",
            "type": "equirectangular",
            "panorama": "assets/360_images/image3.jpg", 
            "hotSpots": [
                {
                    "yaw": 0,
                    "pitch": 0,
                    "type": "scene",
                    "text": "Ke Spot 4", 
                    "sceneId": "scene4"  
                }
            ]
        },
        "scene4": {
            "title": "Spot 4",
            "type": "equirectangular",
            "panorama": "assets/360_images/image4.jpg",
            "hotSpots": [
                {
                    "yaw": 0,
                    "pitch": 0,
                    "type": "scene",
                    "text": "Ke Spot 5", 
                    "sceneId": "scene5" 
                },
                {
                    "yaw": 0,
                    "pitch": 0,
                    "type": "scene",
                    "text": "Ke Spot 20", 
                    "sceneId": "scene20" 
                },
            ]
        },
        "scene5": {
            "title": "Spot 5",
            "type": "equirectangular",
            "panorama": "assets/360_images/image5.jpg",
            "hotSpots": [
                {
                    "yaw": 0,
                    "pitch": 0,
                    "type": "scene",
                    "text": "Ke Spot 6", 
                    "sceneId": "scene6" 
                },
                {
                    "yaw": -81.43,
                    "pitch": -13,
                    "type": "scene",
                    "text": "Ke Spot 7", 
                    "sceneId": "scene7" 
                }
            ]
        },
        "scene6": {
            "title": "Spot 5",
            "type": "equirectangular",
            "panorama": "assets/360_images/image6.jpg",
        },
        "scene7": {
            "title": "Spot 7",
            "type": "equirectangular",
            "panorama": "assets/360_images/image7.jpg",
            "hotSpots": [
                {
                    "yaw": -0.67,
                    "pitch": 9.98,
                    "type": "scene",
                    "text": "Ke Spot 8", 
                    "sceneId": "scene8" 
                }
            ]
        },
        "scene8": {
            "title": "Spot 8",
            "type": "equirectangular",
            "panorama": "assets/360_images/image8.jpg",
            "hotSpots": [
                {
                    "yaw": 0,
                    "pitch": 0,
                    "type": "scene",
                    "text": "Ke Spot 9", 
                    "sceneId": "scene9" 
                }
            ]
        },
        "scene9": {
            "title": "Spot 9",
            "type": "equirectangular",
            "panorama": "assets/360_images/image9.jpg",
            "hotSpots": [
                {
                    "yaw": 0,
                    "pitch": 0,
                    "type": "scene",
                    "text": "Ke Spot 10", 
                    "sceneId": "scene10" 
                }
            ]
        },
        "scene10": {
            "title": "Spot 10",
            "type": "equirectangular",
            "panorama": "assets/360_images/image10.jpg",
            "hotSpots": [
                {
                    "yaw": -85.99,
                    "pitch": -4.50,
                    "type": "scene",
                    "text": "Ke Spot 11", 
                    "sceneId": "scene11" 
                },
                {
                    "yaw": -64.75,
                    "pitch": -16.71,
                    "type": "scene",
                    "text": "Ke Spot 13", 
                    "sceneId": "scene13" 
                },
                {
                    "yaw": -28.82,
                    "pitch": -7.41,
                    "type": "scene",
                    "text": "Ke Spot 14", 
                    "sceneId": "scene14"  
                }
            ]
        },
        "scene11": {
            "title": "Spot 11",
            "type": "equirectangular",
            "panorama": "assets/360_images/image11.jpg",
            "hotSpots": [
                {
                    "yaw": -71.81,
                    "pitch": -13.85,
                    "type": "scene",
                    "text": "Ke Spot 12", 
                    "sceneId": "scene12" 
                }
            ]
        },
        "scene12": {
            "title": "Spot 12",
            "type": "equirectangular",
            "panorama": "assets/360_images/image12.jpg",
        },
        "scene13": {
            "title": "Spot 13",
            "type": "equirectangular",
            "panorama": "assets/360_images/image13.jpg",
            "hotSpots": [
                {
                    "yaw": 86.89,
                    "pitch": -2.79,
                    "type": "scene",
                    "text": "Ke Spot 14", 
                    "sceneId": "scene14" 
                },
                {
                    "yaw": 46.16,
                    "pitch": -17.46,
                    "type": "scene",
                    "text": "Ke Spot 16", 
                    "sceneId": "scene16" 
                }
            ]
        },
        "scene14": {
            "title": "Spot 14",
            "type": "equirectangular",
            "panorama": "assets/360_images/image14.jpg",
            "hotSpots": [
                {
                    "yaw": 0,
                    "pitch": 0,
                    "type": "scene",
                    "text": "Ke Spot 15", 
                    "sceneId": "scene15" 
                }
            ]
        },
        "scene15": {
            "title": "Spot 15",
            "type": "equirectangular",
            "panorama": "assets/360_images/image15.jpg",
        },
        "scene16": {
            "title": "Spot 16",
            "type": "equirectangular",
            "panorama": "assets/360_images/image16.jpg",
            "hotSpots": [
                {
                    "yaw": 37.57,
                    "pitch": -30.02,
                    "type": "scene",
                    "text": "Ke Spot 17", 
                    "sceneId": "scene17" 
                }
            ]
        },
        "scene17": {
            "title": "Spot 17",
            "type": "equirectangular",
            "panorama": "assets/360_images/image17.jpg",
            "hotSpots": [
                {
                    "yaw": -3.21,
                    "pitch": -25.23,
                    "type": "scene",
                    "text": "Ke Spot 18", 
                    "sceneId": "scene18" 
                }
            ]
        },
        "scene18": {
            "title": "Spot 18",
            "type": "equirectangular",
            "panorama": "assets/360_images/image18.jpg",
            "hotSpots": [
                {
                    "yaw": -1.12,
                    "pitch": -39.96,
                    "type": "scene",
                    "text": "Ke Spot 19", 
                    "sceneId": "scene19" 
                }
            ]
        },
        "scene19": {
            "title": "Spot 19",
            "type": "equirectangular",
            "panorama": "assets/360_images/image19.jpg",
        },
        "scene20": {
            "title": "Spot 20",
            "type": "equirectangular",
            "panorama": "assets/360_images/image20.jpg",
            "hotSpots": [
                {
                    "yaw": -28.53,
                    "pitch": -4.13,
                    "type": "scene",
                    "text": "Ke Spot 21", 
                    "sceneId": "scene21" 
                }
            ]
        },
        "scene21": {
            "title": "Spot 21",
            "type": "equirectangular",
            "panorama": "assets/360_images/image21.jpg",
            "hotSpots": [
                {
                    "yaw": -29.66,
                    "pitch": -8.84,
                    "type": "scene",
                    "text": "Ke Spot 22", 
                    "sceneId": "scene22" 
                }
            ]
        },
        "scene22": {
            "title": "Spot 22",
            "type": "equirectangular",
            "panorama": "assets/360_images/image22.jpg",
            "hotSpots": [
                {
                    "yaw": 4.59,
                    "pitch": -22.01,
                    "type": "scene",
                    "text": "Ke Spot 23", 
                    "sceneId": "scene23" 
                }
            ]
        },
        "scene23": {
            "title": "Spot 23",
            "type": "equirectangular",
            "panorama": "assets/360_images/image23.jpg",
            "hotSpots": [
                {
                    "yaw": -174.63,
                    "pitch": -11.20,
                    "type": "scene",
                    "text": "Ke Spot 24", 
                    "sceneId": "scene24" 
                }
            ]
        },
        "scene24": {
            "title": "Spot 24",
            "type": "equirectangular",
            "panorama": "assets/360_images/image24.jpg",
            "hotSpots": [
                {
                    "yaw": 83.94,
                    "pitch": -12.27,
                    "type": "scene",
                    "text": "Ke Spot 25", 
                    "sceneId": "scene25" 
                }
            ]
        },
        "scene25": {
            "title": "Spot 25",
            "type": "equirectangular",
            "panorama": "assets/360_images/image25.jpg",
        }
    }
});
  // === Menampilkan koordinat pitch dan yaw saat panorama di-klik ===
  const coordDiv = document.createElement('div');
  coordDiv.style.position = 'fixed';
  coordDiv.style.bottom = '24px';
  coordDiv.style.right = '24px';
  coordDiv.style.background = '#111831cc';
  coordDiv.style.color = '#22d3ee';
  coordDiv.style.padding = '10px 18px';
  coordDiv.style.borderRadius = '10px';
  coordDiv.style.fontWeight = 'bold';
  coordDiv.style.zIndex = '2000';
  coordDiv.style.fontFamily = 'monospace';
  coordDiv.style.pointerEvents = 'none';
  coordDiv.textContent = 'Klik panorama untuk koordinat';
  document.body.appendChild(coordDiv);

  const panoramaEl = document.getElementById('panorama');
  const toggleBtn = document.getElementById('toggleDragBtn');
  const viewerContainer = typeof viewer.getContainer === 'function'
    ? viewer.getContainer()
    : panoramicFallback();

  let dragEnabled = true;

  function panoramicFallback() {
    return panoramaEl.querySelector('.pnlm-container') || panoramaEl;
  }

  function setCoordHint(message) {
    coordDiv.textContent = message;
  }

  function showCoords(event) {
    const coords = viewer.mouseEventToCoords(event);
    if (coords && Number.isFinite(coords.yaw) && Number.isFinite(coords.pitch)) {
      coordDiv.textContent = `Yaw: ${coords.yaw.toFixed(2)}, Pitch: ${coords.pitch.toFixed(2)}`;
    } else {
      const fallbackYaw = typeof viewer.getYaw === 'function' ? viewer.getYaw() : NaN;
      const fallbackPitch = typeof viewer.getPitch === 'function' ? viewer.getPitch() : NaN;
      if (Number.isFinite(fallbackYaw) && Number.isFinite(fallbackPitch)) {
        coordDiv.textContent = `Yaw: ${fallbackYaw.toFixed(2)}, Pitch: ${fallbackPitch.toFixed(2)}`;
      } else {
        setCoordHint('Tidak dapat membaca koordinat');
      }
    }
  }

  function handlePointer(event) {
    if (!dragEnabled) {
      showCoords(event);
      event.stopPropagation();
      event.preventDefault();
    }
  }

  function handleScroll(event) {
    if (!dragEnabled) {
      event.stopPropagation();
      event.preventDefault();
    }
  }

  const wheelListenerOptions = { capture: true, passive: false };

  function disableDrag() {
    dragEnabled = false;
    panoramaEl.style.cursor = 'pointer';
    viewerContainer.style.cursor = 'pointer';
    viewerContainer.addEventListener('mousedown', handlePointer, true);
    viewerContainer.addEventListener('touchstart', handlePointer, true);
    viewerContainer.addEventListener('click', handlePointer, true);
    viewerContainer.addEventListener('touchend', handlePointer, true);
    viewerContainer.addEventListener('wheel', handleScroll, wheelListenerOptions);
    toggleBtn.textContent = 'Aktifkan Drag';
    setCoordHint('Mode koordinat aktif — klik panorama');
  }

  function enableDrag() {
    dragEnabled = true;
    panoramaEl.style.cursor = 'grab';
    viewerContainer.style.cursor = 'grab';
    viewerContainer.removeEventListener('mousedown', handlePointer, true);
    viewerContainer.removeEventListener('touchstart', handlePointer, true);
    viewerContainer.removeEventListener('click', handlePointer, true);
    viewerContainer.removeEventListener('touchend', handlePointer, true);
    viewerContainer.removeEventListener('wheel', handleScroll, wheelListenerOptions);
    toggleBtn.textContent = 'Nonaktifkan Drag';
    setCoordHint('Klik panorama untuk koordinat');
  }

  toggleBtn.onclick = function() {
    if (dragEnabled) {
      disableDrag();
    } else {
      enableDrag();
    }
  };

  // Set cursor awal dan pesan bawaan
  enableDrag();
</script>

</body>
</html>